{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ titulo }}</title>

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'style.css' %}" />
    <link rel="stylesheet" href="{% static 'css/jogo_da_velha.css' %}" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <div class="game-container">
        <!-- Botão Voltar -->
        <a href="{% url 'home' %}" class="back-button">
          <i class="fas fa-arrow-left"></i>
          Voltar ao Menu
        </a>

        <!-- Título do Jogo -->
        <div class="game-title">
          <h1>{{ titulo }}</h1>
          <p>{{ descricao }}</p>
        </div>

        <!-- Seleção de Modo de Jogo (sempre visível no início) -->
        <div class="mode-selection" id="modeSelection">
          <button class="mode-button" onclick="selecionarModo('multi')">
            <i class="fas fa-users"></i> Multijogador Local
          </button>
          <button class="mode-button" onclick="selecionarModo('single')">
            <i class="fas fa-user"></i> Jogar Contra Computador
          </button>
        </div>

        <!-- Informações do Jogo (inicialmente oculto) -->
        <div class="game-info hidden" id="gameInfo">
          <div class="current-player" id="currentPlayer">Vez do Jogador X</div>
          <div class="game-status" id="gameStatus">
            Use comandos SQL para fazer suas jogadas
          </div>
        </div>

        <!-- Tabuleiro do Jogo (inicialmente oculto) -->
        <div class="game-board hidden" id="gameBoard">
          <div class="cell" data-row="0" data-col="0" id="cell_0_0">
            <span></span>
          </div>
          <div class="cell" data-row="0" data-col="1" id="cell_0_1">
            <span></span>
          </div>
          <div class="cell" data-row="0" data-col="2" id="cell_0_2">
            <span></span>
          </div>
          <div class="cell" data-row="1" data-col="0" id="cell_1_0">
            <span></span>
          </div>
          <div class="cell" data-row="1" data-col="1" id="cell_1_1">
            <span></span>
          </div>
          <div class="cell" data-row="1" data-col="2" id="cell_1_2">
            <span></span>
          </div>
          <div class="cell" data-row="2" data-col="0" id="cell_2_0">
            <span></span>
          </div>
          <div class="cell" data-row="2" data-col="1" id="cell_2_1">
            <span></span>
          </div>
          <div class="cell" data-row="2" data-col="2" id="cell_2_2">
            <span></span>
          </div>
        </div>

        <!-- Seção de Input SQL (inicialmente oculto) -->
        <div class="sql-input-section hidden" id="sqlSection">
          <h3><i class="fas fa-terminal"></i> Digite seu comando SQL:</h3>
          <input
            type="text"
            class="sql-input"
            id="sqlInput"
            placeholder="Digite seu comando SQL aqui..."
          />
          <div class="button-group">
            <button class="execute-button" onclick="executarSQL()">
              <i class="fas fa-play"></i>
              Executar SQL
            </button>
            <button class="help-button" onclick="mostrarAjuda()">
              <i class="fas fa-question-circle"></i>
              Como Jogar
            </button>
          </div>
        </div>

        <!-- Mensagens de Status -->
        <div id="messageContainer"></div>
      </div>
    </div>

    <!-- Modal de Resultado do Jogo -->
    <div class="modal-overlay hidden" id="resultModal">
      <div class="modal-content">
        <h2 class="modal-title" id="modalTitle">Fim de Jogo</h2>
        <p class="modal-message" id="modalMessage"></p>
        <div class="modal-buttons">
          <button
            class="modal-button secondary"
            onclick="jogarNovamente('multi')"
          >
            <i class="fas fa-users"></i> Multijogador
          </button>
          <button
            class="modal-button secondary"
            onclick="jogarNovamente('single')"
          >
            <i class="fas fa-user"></i> Contra Computador
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Ajuda -->
    <div class="help-modal-overlay hidden" id="helpModal">
      <div class="help-modal-content">
        <h2 class="help-modal-title">
          <i class="fas fa-graduation-cap"></i> Como Jogar com SQL
        </h2>

        <div class="help-section">
          <h4><i class="fas fa-lightbulb"></i> Conceito do Jogo</h4>
          <p>
            Este jogo ensina SQL através da prática! Em vez de clicar nas
            células, você deve usar comandos SQL para fazer suas jogadas.
          </p>
        </div>

        <div class="help-section">
          <h4><i class="fas fa-database"></i> Estrutura do Banco</h4>
          <p>
            O tabuleiro é representado por uma tabela chamada
            <strong>tabuleiro</strong> com as colunas:
          </p>
          <ul>
            <li><strong>linha</strong>: posição vertical (0, 1, 2)</li>
            <li><strong>coluna</strong>: posição horizontal (0, 1, 2)</li>
            <li><strong>valor</strong>: 'X' ou 'O'</li>
          </ul>
        </div>

        <div class="help-section">
          <h4><i class="fas fa-terminal"></i> Comandos Aceitos</h4>
          <p>Você pode usar dois tipos de comandos SQL:</p>
          <ul>
            <li><strong>INSERT INTO</strong>: para inserir uma nova jogada</li>
            <li>
              <strong>UPDATE</strong>: para modificar uma posição existente
            </li>
          </ul>
        </div>

        <div class="help-section">
          <h4><i class="fas fa-map-marker-alt"></i> Coordenadas</h4>
          <p>As coordenadas vão de 0 a 2:</p>
          <ul>
            <li><strong>Linha 0</strong>: primeira linha (topo)</li>
            <li><strong>Linha 1</strong>: linha do meio</li>
            <li><strong>Linha 2</strong>: última linha (baixo)</li>
            <li><strong>Coluna 0</strong>: primeira coluna (esquerda)</li>
            <li><strong>Coluna 1</strong>: coluna do meio</li>
            <li><strong>Coluna 2</strong>: última coluna (direita)</li>
          </ul>
        </div>

        <div class="help-section">
          <h4>
            <i class="fas fa-exclamation-triangle"></i> Regras Importantes
          </h4>
          <ul>
            <li>Use apenas valores 'X' ou 'O' (maiúsculos)</li>
            <li>As coordenadas devem estar entre 0 e 2</li>
            <li>Não pode jogar em posições já ocupadas</li>
            <li>Os jogadores alternam turnos automaticamente</li>
          </ul>
        </div>

        <div class="help-section">
          <h4><i class="fas fa-rocket"></i> Dica</h4>
          <p>
            Comece testando com comandos simples! O sistema validará sua sintaxe
            SQL e mostrará mensagens de erro se algo estiver incorreto.
          </p>
        </div>

        <button class="close-help-button" onclick="ocultarAjuda()">
          <i class="fas fa-times"></i> Entendi!
        </button>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="{% static 'js/jogo_da_velha.js' %}"></script>
  </body>
</html>
